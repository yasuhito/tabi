# -*- coding: utf-8 -*-
require "rubygems"
require "file-tail"


$tabi = File.join File.dirname( __FILE__ ), "tabi"


File.open( "/var/log/syslog" ) do | log |
  log.extend File::Tail
  log.interval = 1
  log.backward 0
  log.tail do | line |
    # [TODO] もちっと真面目にパターンマッチ
    if /DHCPACK on \S+ to (\S+)/=~ line
      system "#{ $tabi } pending #{ $1 }"
    end
  end
end


### Local variables:
### mode: Ruby
### coding: utf-8
### indent-tabs-mode: nil
### End:
